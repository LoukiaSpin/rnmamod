<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="comp_clustering hosts a toolkit of functions that facilitates
  conducting, visualising and evaluating hierarchical agglomerative of
  observed comparisons of interventions for a specific network and set of
  characteristics that act as effect modifiers. It also calculates the
  non-statistical heterogeneity within-comparisons and between-comparisons
  using the dissimilarities among all trials of the network."><title>End-user-ready results for comparison dissimilarity and hierarchical clustering
(Comparisons' comparability for transitivity evaluation) — comp_clustering • rnmamod</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="End-user-ready results for comparison dissimilarity and hierarchical clustering
(Comparisons' comparability for transitivity evaluation) — comp_clustering"><meta property="og:description" content="comp_clustering hosts a toolkit of functions that facilitates
  conducting, visualising and evaluating hierarchical agglomerative of
  observed comparisons of interventions for a specific network and set of
  characteristics that act as effect modifiers. It also calculates the
  non-statistical heterogeneity within-comparisons and between-comparisons
  using the dissimilarities among all trials of the network."><meta property="og:image" content="https://loukiaspin.github.io/rnmamod/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rnmamod</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/network_description.html">Description of the network</a>
    <a class="dropdown-item" href="../articles/perform_network_metaanalysis.html">Perform network meta-analysis</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/LoukiaSpin/rnmamod/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>End-user-ready results for comparison dissimilarity and hierarchical clustering
(Comparisons' comparability for transitivity evaluation)</h1>
      <small class="dont-index">Source: <a href="https://github.com/LoukiaSpin/rnmamod/blob/HEAD/R/comp.clustering_function.R" class="external-link"><code>R/comp.clustering_function.R</code></a></small>
      <div class="d-none name"><code>comp_clustering.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>comp_clustering</code> hosts a toolkit of functions that facilitates
  conducting, visualising and evaluating hierarchical agglomerative of
  observed comparisons of interventions for a specific network and set of
  characteristics that act as effect modifiers. It also calculates the
  non-statistical heterogeneity within-comparisons and between-comparisons
  using the dissimilarities among all trials of the network.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">comp_clustering</span><span class="op">(</span></span>
<span>  <span class="va">input</span>,</span>
<span>  <span class="va">drug_names</span>,</span>
<span>  <span class="va">threshold</span>,</span>
<span>  informative <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  ranged_values <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">optimal_clusters</span>,</span>
<span>  get_plots <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  label_size <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  title_size <span class="op">=</span> <span class="fl">14</span>,</span>
<span>  axis_title_size <span class="op">=</span> <span class="fl">14</span>,</span>
<span>  axis_text_size <span class="op">=</span> <span class="fl">14</span>,</span>
<span>  axis_x_text_angle <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  legend_text_size <span class="op">=</span> <span class="fl">13</span>,</span>
<span>  str_wrap_width <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>input</dt>
<dd><p>A data-frame in the long arm-based format. Two-arm trials occupy
one row in the data-frame. Multi-arm trials occupy as many rows as the
number of possible comparisons among the interventions. The first three
columns refer to the trial name, first and second arm of the comparison,
respectively. The remaining columns refer to summary characteristics. See
'Details' for the specification of the columns.</p></dd>


<dt>drug_names</dt>
<dd><p>A vector of labels with the name of the interventions
in the order they have been defined in the argument <code>input</code>.</p></dd>


<dt>threshold</dt>
<dd><p>A positive scalar to indicate the cut-off of low
dissimilarity of two comparisons. The value much be low.</p></dd>


<dt>informative</dt>
<dd><p>Logical with <code>TRUE</code> for evaluating only the
comparison dissimilarity and <code>FALSE</code> for performing hierarchical
agglomerative clustering, thus, allowing the user to define the number of
clusters via the argument <code>optimal_clusters</code>.
The default argument is <code>TRUE</code>.</p></dd>


<dt>ranged_values</dt>
<dd><p>Whether to use a colour scale when creating the
heatmap of within-comparison and between-comparison dissimilarities
(<code>TRUE</code>) or colour the cells with green and orange, when below or
exceeding the specified <code>threshold</code>. Relevant only when
<code>informative = TRUE</code>. The default argument is <code>FALSE</code>.</p></dd>


<dt>optimal_clusters</dt>
<dd><p>A positive integer for the optimal number of
clusters, ideally, decided after inspecting the profile plot with average
silhouette widths for a range of clusters, and the dendrogram. The user
<b>must</b> define the value. It takes values from two to the number of
trials minus one.</p></dd>


<dt>get_plots</dt>
<dd><p>Logical with values <code>TRUE</code> for returning all plots and
<code>FALSE</code> for concealing the plots. The default argument is
<code>FALSE</code>.</p></dd>


<dt>label_size</dt>
<dd><p>A positive integer for the font size of labels in the
violin plot for the study dissimilarities per comparison and comparison
between comparisons. <code>label_size</code> determines the size argument found
in the geom's aesthetic properties in the R-package
<a href="https://CRAN.R-project.org/package=ggplot2" class="external-link">ggplot2</a>.</p></dd>


<dt>title_size</dt>
<dd><p>A positive integer for the font size of legend title in
the stacked barplot on the percentage studies of each comparison found in
the clusters. <code>title_size</code> determines the title argument
found in the theme's properties in the R-package
<a href="https://CRAN.R-project.org/package=ggplot2" class="external-link">ggplot2</a>.</p></dd>


<dt>axis_title_size</dt>
<dd><p>A positive integer for the font size of axis title in
the violin plot for the study dissimilarities per comparison and comparison
between comparisons, and the barplot of percentage trials per comparison
and cluster. <code>axis_title_size</code> determines the axis.title
argument found in the theme's properties in the
R-package <a href="https://CRAN.R-project.org/package=ggplot2" class="external-link">ggplot2</a>.</p></dd>


<dt>axis_text_size</dt>
<dd><p>A positive integer for the font size of axis text in
the violin plot for the study dissimilarities per comparison and comparison
between comparisons, the heatmap of comparison dissimilarity, and the
barplot of percentage trials per comparison and cluster.
<code>axis_text_size</code> determines the axis.text argument found in the
theme's properties in the R-package
<a href="https://CRAN.R-project.org/package=ggplot2" class="external-link">ggplot2</a>.</p></dd>


<dt>axis_x_text_angle</dt>
<dd><p>A positive integer for the angle of axis text in
the violin plot for the study dissimilarities per comparison and comparison
between comparisons. <code>axis_x_text_angle</code> determines the axis.text.x
argument found in the theme's properties in the R-package
<a href="https://CRAN.R-project.org/package=ggplot2" class="external-link">ggplot2</a>.</p></dd>


<dt>legend_text_size</dt>
<dd><p>A positive integer for the font size of legend text
in the barplot of percentage trials per comparison and cluster.
<code>legend_text_size</code> determines the legend.text argument found in the
theme's properties in the R-package
<a href="https://CRAN.R-project.org/package=ggplot2" class="external-link">ggplot2</a>.</p></dd>


<dt>str_wrap_width</dt>
<dd><p>A positive integer for wrapping the axis labels in the
the violin plot for the study dissimilarities per comparison between
comparisons. <code>str_wrap_width</code> determines the
<code><a href="https://stringr.tidyverse.org/reference/str_wrap.html" class="external-link">str_wrap</a></code> function of the R-package
<a href="https://CRAN.R-project.org/package=stringr" class="external-link">stringr</a>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>Initially, <code>comp_clustering</code> prints on the console the following
  messages: the number of observed comparisons (and number of single-study
  comparisons, if any); the number of dropped characteristics due to many
  missing data; the maximum value of the cophenetic correlation coefficient;
  and the optimal linkage method selected based on the cophenetic correlation
  coefficient. Then, the function returns the following list of elements:</p>
<dl><dt>Trials_diss_table</dt>
<dd><p>A lower off-diagonal matrix of 'dist' class
  with the Gower dissimilarities of all pairs of studies in the network.</p></dd>

  <dt>Comparisons_diss_table</dt>
<dd><p>A lower off-diagonal matrix of 'dist' class
  with the within-comparison dissimilarities at the main diagonal and the
  between-comparison dissimilarities of all pairs of observed
  intervention comparisons at the off-diagonal elements.</p></dd>

  <dt>Total_dissimilarity</dt>
<dd><p>A data-frame on the observed comparisons and
  comparisons between comparisons, alongside the corresponding
  within-comparison and between-comparisons dissimilarity. The data-frame has
  been sorted in decreasing within each dissimilarity 'type'.</p></dd>

  <dt>Types_used</dt>
<dd><p>A data-frame with type mode (i.e., double or integer) of
  each characteristic.</p></dd>

  <dt>Total_missing</dt>
<dd><p>The percentage of missing cases in the dataset,
  calculated as the ratio of total missing cases to the product of the number
  of studies with the number of characteristics.</p></dd>

  <dt>Cluster_comp</dt>
<dd><p>A data-frame on the studies and the cluster they
  belong (based on the argument <code>optimal_clusters</code>.</p></dd>

  <dt>Table_average_silhouette_width</dt>
<dd><p>A data-frame with the average
  silhouette width for a range of 2 to P-1 trials, with P being the number
  trials.</p></dd>

  <dt>Table_cophenetic_coefficient</dt>
<dd><p>A data-frame on the cophenetic
  correlation coefficient for eight linkage methods (Ward's two
  versions, single, complete, average, Mcquitty, median and centroid). The
  data-frame has been sorted in decreasing order of the cophenetic correlation
  coefficient.</p></dd>

  <dt>Optimal_link</dt>
<dd><p>The optimal linkage method (ward.D, ward.D2, single,
  complete, average, mcquitty, median, or centroid) based on the cophenetic
  correlation coefficient.</p></dd>


</dl><p>If <code>get_plots = FALSE</code> only the list of elements mentioned above is
  returned. If <code>get_plots = TRUE</code>, <code>comp_clustering</code> returns a
  series of plots in addition to the list of elements mentioned above:</p>
<dl><dt>Within_comparison_dissimilarity</dt>
<dd><p>A violin plot with integrated box
  plots and dots on the study dissimilarities per observed comparison
  (x-axis). Violins are sorted in descending order of the within-comparison
  dissimilarities (blue point).</p></dd>

  <dt>Between_comparison_dissimilarity</dt>
<dd><p>A violin plot with integrated box
  plots and dots on the study dissimilarities per comparison between
  comparisons (x-axis). Violins are sorted in descending order of the
  between-comparison dissimilarities (blue point).</p></dd>

  <dt>Dissimilarity_heatmap</dt>
<dd><p>A heatmap on within-comparison and
  between-comparison dissimilarities when (<code>informative = TRUE</code>).
  Diagonal elements refer to within-comparison dissimilarity, and
  off-diagonal elements refer to between-comparisons dissimilarity. Using a
  threshold of high similarity (specified using the argument
  <code>threshold</code>), cells equal or above this threshold are highlighted in
  orange; otherwise, in green. This heatmap aids in finding 'hot spots' of
  comparisons that may violate the plausibility of transitivity in the
  network. Single-study comparisons are indicated with white numbers.</p></dd>

  <dt>Profile_plot</dt>
<dd><p>A profile plot on the average silhouette width for a
  range of 2 to P-1 clusters, with P being the number of trials. The
  candidate optimal number of  clusters is indicated with a red point
  directly on the line.</p></dd>

  <dt>Silhouette_width_plot</dt>
<dd><p>A silhouette plot illustrating the silhouette
  width for each trial, with the trials sorted in decreasing order within the
  cluster they belong. This output is obtained by calling the
  <code><a href="https://rdrr.io/pkg/cluster/man/silhouette.html" class="external-link">silhouette</a></code> function in the R-package
  <a href="https://CRAN.R-project.org/package=cluster" class="external-link">cluster</a>.</p></dd>

  <dt>Barplot_comparisons_cluster</dt>
<dd><p>As stacked barplot on the percentage
  trials of each comparison found in the clusters (based on the argument
  <code>optimal_clusters</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The correct type mode of columns in <code>input</code> must be ensured to use
  the function <code>comp_clustering</code>. The first three columns referring to
  the trial name, first and second arm of the comparison, respectively, must
  be <strong>character</strong>. The remaining columns referring to the
  characteristics must be <strong>double</strong> or <strong>integer</strong> depending on
  whether the corresponding characteristic refers to a quantitative or
  qualitative variable. The type mode of each column is assessed by
  <code>comp_clustering</code> using the base function <code>typeof</code>. Note that
  <code>comp_clustering</code> invites unordered and ordered variables; for the
  latter, add the argument <code>ordered = TRUE</code> in the base function
  <b>factor()</b>.</p>
<p>The interventions should be sorted in an ascending order of their
  identifier number within the trials so that the first intervention column
  (second column in <code>input</code>) is the control arm for every pairwise
  comparison. This is important to ensure consistency in the intervention
  order within the comparisons obtained from the other related functions.</p>
<p><code>comp_clustering</code> excludes from the dataset the following type of
  characteristics: (i) completely missing characteristics and
  (ii) characteristics with missing values in all but one studies for at
  least one non-single-stufy comparison. Then it proceeds with the clustering
  process.</p>
<p>The cophenetic correlation coefficient is calculated using the
  <code><a href="https://rdrr.io/r/stats/cophenetic.html" class="external-link">cophenetic</a></code> function alongside the
  <code><a href="https://rdrr.io/r/stats/hclust.html" class="external-link">hclust</a></code> function for selected linkage methods.</p>
<p><code>comp_clustering</code> can be used only for a network with at least three
  comparisons. Otherwise, the execution of the function will be stopped and
  an error message will be printed on the R console.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Gower J. General Coefficient of Similarity and Some of Its Properties.
<em>Biometrics</em> 1971;<b>27</b>(4):857--71.
doi: 10.2307/2528823</p>
<p>Sokal R, Rohlf F. The Comparison of Dendrograms by Objective Methods.
<em>Int Assoc Plant Taxon</em> 1962;<b>11</b>(2):33--40.
doi: 10.2307/1217208</p>
<p>Handl J, Knowles J, Kell DB. Computational cluster validation in post-genomic
data analysis. <em>Biometrics</em> 2005;<b>21</b>(15):3201--120.
doi: 10.1093/bioinformatics/bti517</p>
<p>Rousseeuw PJ. Silhouettes: A graphical aid to the interpretation and
validation of cluster analysis.
<em>J Comput Appl Math</em> 1987;<b>20</b>:53--65.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/r/stats/cophenetic.html" class="external-link">cophenetic</a></code>,
 <code><a href="https://rdrr.io/r/stats/hclust.html" class="external-link">hclust</a></code>, <code><a href="internal_measures_plot.html">internal_measures_plot</a></code>,
 <code><a href="https://rdrr.io/pkg/cluster/man/silhouette.html" class="external-link">silhouette</a></code>,
 <code><a href="https://stringr.tidyverse.org/reference/str_wrap.html" class="external-link">str_wrap</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Loukia M. Spineli</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Loukia Spineli.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

