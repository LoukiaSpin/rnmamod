<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Density plots of local inconsistency results and Kullback-Leibler divergence when 'rnmamod', 'netmeta' or 'gemtc' R packages are used — kld_inconsistency • rnmamod</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Density plots of local inconsistency results and Kullback-Leibler divergence when 'rnmamod', 'netmeta' or 'gemtc' R packages are used — kld_inconsistency"><meta name="description" content="A panel of density plots on the direct and indirect estimates of the
selected comparisons based on approach for local inconsistency evaluation,
such as back-calculation and node-splitting approaches (Dias et al., 2010;
van Valkenhoef et al., 2016) and loop-specific approach (Bucher et al., 1997)
accompanied by the average Kullback-Leibler divergence. Additionally, stacked
bar plots on the percentage contribution of either Kullback-Leibler
divergence (from direct to indirect, and vice-versa) to the total information
loss for each selected comparison are presented.
The function handles results also from the R-packages
  gemtc and
  netmeta."><meta property="og:description" content="A panel of density plots on the direct and indirect estimates of the
selected comparisons based on approach for local inconsistency evaluation,
such as back-calculation and node-splitting approaches (Dias et al., 2010;
van Valkenhoef et al., 2016) and loop-specific approach (Bucher et al., 1997)
accompanied by the average Kullback-Leibler divergence. Additionally, stacked
bar plots on the percentage contribution of either Kullback-Leibler
divergence (from direct to indirect, and vice-versa) to the total information
loss for each selected comparison are presented.
The function handles results also from the R-packages
  gemtc and
  netmeta."><meta property="og:image" content="https://loukiaspin.github.io/rnmamod/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rnmamod</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/network_description.html">Description of the network</a></li>
    <li><a class="dropdown-item" href="../articles/perform_network_metaanalysis.html">Perform network meta-analysis</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/LoukiaSpin/rnmamod/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Density plots of local inconsistency results and Kullback-Leibler divergence when 'rnmamod', 'netmeta' or 'gemtc' R packages are used</h1>
      <small class="dont-index">Source: <a href="https://github.com/LoukiaSpin/rnmamod/blob/main/R/kld.inconsistency_function.R" class="external-link"><code>R/kld.inconsistency_function.R</code></a></small>
      <div class="d-none name"><code>kld_inconsistency.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A panel of density plots on the direct and indirect estimates of the
selected comparisons based on approach for local inconsistency evaluation,
such as back-calculation and node-splitting approaches (Dias et al., 2010;
van Valkenhoef et al., 2016) and loop-specific approach (Bucher et al., 1997)
accompanied by the average Kullback-Leibler divergence. Additionally, stacked
bar plots on the percentage contribution of either Kullback-Leibler
divergence (from direct to indirect, and vice-versa) to the total information
loss for each selected comparison are presented.
The function handles results also from the R-packages
  <a href="https://CRAN.R-project.org/package=gemtc" class="external-link">gemtc</a> and
  <a href="https://CRAN.R-project.org/package=netmeta" class="external-link">netmeta</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">kld_inconsistency</span><span class="op">(</span></span>
<span>  <span class="va">node</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">1e-05</span>,</span>
<span>  drug_names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  outcome <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  scales <span class="op">=</span> <span class="st">"free"</span>,</span>
<span>  show_incons <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  y_axis_name <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  title_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  axis_title_size <span class="op">=</span> <span class="fl">13</span>,</span>
<span>  axis_text_size <span class="op">=</span> <span class="fl">13</span>,</span>
<span>  text_size <span class="op">=</span> <span class="fl">3.5</span>,</span>
<span>  strip_text_size <span class="op">=</span> <span class="fl">13</span>,</span>
<span>  legend_title_size <span class="op">=</span> <span class="fl">13</span>,</span>
<span>  legend_text_size <span class="op">=</span> <span class="fl">13</span>,</span>
<span>  str_wrap_width <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-node">node<a class="anchor" aria-label="anchor" href="#arg-node"></a></dt>
<dd><p>An object of S3 class <code><a href="run_nodesplit.html">run_nodesplit</a></code> or class
<code><a href="https://rdrr.io/pkg/gemtc/man/mtc.nodesplit.html" class="external-link">mtc.nodesplit</a></code>
(see <a href="https://CRAN.R-project.org/package=gemtc" class="external-link">gemtc</a>) or
class <code><a href="https://rdrr.io/pkg/netmeta/man/netsplit.html" class="external-link">netsplit</a></code> (see
<a href="https://CRAN.R-project.org/package=netmeta" class="external-link">netmeta</a>).</p></dd>


<dt id="arg-threshold">threshold<a class="anchor" aria-label="anchor" href="#arg-threshold"></a></dt>
<dd><p>A positive number indicating the threshold of not concerning
inconsistency, that is, the minimally allowed deviation between the direct
and indirect estimates for a split node that does raise concerns for
material inconsistency. The argument is optional.</p></dd>


<dt id="arg-drug-names">drug_names<a class="anchor" aria-label="anchor" href="#arg-drug-names"></a></dt>
<dd><p>A vector of labels with the name of the interventions in
the order they appear in the argument <code>data</code>. It is not relevant for
<a href="https://CRAN.R-project.org/package=gemtc" class="external-link">gemtc</a> and
<a href="https://CRAN.R-project.org/package=netmeta" class="external-link">netmeta</a>.</p></dd>


<dt id="arg-outcome">outcome<a class="anchor" aria-label="anchor" href="#arg-outcome"></a></dt>
<dd><p>Optional argument to describe the effect measure used (the
x-axis of the plots).</p></dd>


<dt id="arg-scales">scales<a class="anchor" aria-label="anchor" href="#arg-scales"></a></dt>
<dd><p>A character on whether both axes should be fixed
(<code>"fixed"</code>) or free (<code>"free"</code>) or only one of them be free
(<code>"free_x"</code> or <code>"free_y"</code>). <code>scales</code> determines the scales
argument found in function (<code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></code>)
in the R-package
<a href="https://CRAN.R-project.org/package=ggplot2" class="external-link">ggplot2</a>. The default is
(<code>"free"</code>).</p></dd>


<dt id="arg-show-incons">show_incons<a class="anchor" aria-label="anchor" href="#arg-show-incons"></a></dt>
<dd><p>Logical to indicate whether to present the point estimate
and 95<!-- % interval of the inconsistency parameter. The default is \code{TRUE} -->
(report).</p></dd>


<dt id="arg-y-axis-name">y_axis_name<a class="anchor" aria-label="anchor" href="#arg-y-axis-name"></a></dt>
<dd><p>Logical to indicate whether to present the title of y-axis
('Density'). The default is <code>TRUE</code> (report).</p></dd>


<dt id="arg-title-name">title_name<a class="anchor" aria-label="anchor" href="#arg-title-name"></a></dt>
<dd><p>Text for the title of the plot. <code>title_name</code>
determines the labs argument of the R-package
<a href="https://CRAN.R-project.org/package=ggplot2" class="external-link">ggplot2</a>.</p></dd>


<dt id="arg-axis-title-size">axis_title_size<a class="anchor" aria-label="anchor" href="#arg-axis-title-size"></a></dt>
<dd><p>A positive integer for the font size of axis title.
<code>axis_title_size</code> determines the axis.title argument found in the
theme's properties in the R-package
<a href="https://CRAN.R-project.org/package=ggplot2" class="external-link">ggplot2</a>.
The default option is 13.</p></dd>


<dt id="arg-axis-text-size">axis_text_size<a class="anchor" aria-label="anchor" href="#arg-axis-text-size"></a></dt>
<dd><p>A positive integer for the font size of axis text.
<code>axis_text_size</code> determines the axis.text argument found in the
theme's properties in the R-package
<a href="https://CRAN.R-project.org/package=ggplot2" class="external-link">ggplot2</a>.
The default option is 13.</p></dd>


<dt id="arg-text-size">text_size<a class="anchor" aria-label="anchor" href="#arg-text-size"></a></dt>
<dd><p>A positive integer for the font size of labels.
<code>text_size</code> determines the size argument found in the geom_text
function in the R-package
<a href="https://CRAN.R-project.org/package=ggplot2" class="external-link">ggplot2</a>.
The default option is 3.5.</p></dd>


<dt id="arg-strip-text-size">strip_text_size<a class="anchor" aria-label="anchor" href="#arg-strip-text-size"></a></dt>
<dd><p>A positive integer for the font size of facet labels.
<code>legend_text_size</code> determines the legend.text argument found in
the theme's properties in the R-package
<a href="https://CRAN.R-project.org/package=ggplot2" class="external-link">ggplot2</a>.
The default option is 13.</p></dd>


<dt id="arg-legend-title-size">legend_title_size<a class="anchor" aria-label="anchor" href="#arg-legend-title-size"></a></dt>
<dd><p>A positive integer for the font size of legend
title. <code>legend_text_size</code> determines the legend.text argument found in
the theme's properties in the R-package
<a href="https://CRAN.R-project.org/package=ggplot2" class="external-link">ggplot2</a>.
The default option is 13.</p></dd>


<dt id="arg-legend-text-size">legend_text_size<a class="anchor" aria-label="anchor" href="#arg-legend-text-size"></a></dt>
<dd><p>A positive integer for the font size of legend text.
<code>legend_text_size</code> determines the legend.text argument found in the
theme's properties in the R-package
<a href="https://CRAN.R-project.org/package=ggplot2" class="external-link">ggplot2</a>.
The default option is 13.</p></dd>


<dt id="arg-str-wrap-width">str_wrap_width<a class="anchor" aria-label="anchor" href="#arg-str-wrap-width"></a></dt>
<dd><p>A positive integer for wrapping the axis labels in the
percent stacked bar-plot. <code>str_wrap_width</code> determines the
<code><a href="https://stringr.tidyverse.org/reference/str_wrap.html" class="external-link">str_wrap</a></code> function of the R-package
<a href="https://CRAN.R-project.org/package=stringr" class="external-link">stringr</a>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The first plot is a panel of density plots for each split node sorted
in ascending order of the Kullback-Leibler divergence value. Blue and black
lines refer to the direct and indirect estimates, respectively. The grey
segment refers to the 95% credible (confidence) interval of the
inconsistency parameter, when <code><a href="run_nodesplit.html">run_nodesplit</a></code>
(<code><a href="https://rdrr.io/pkg/netmeta/man/netsplit.html" class="external-link">netsplit</a></code>) has been applied, with a darker
grey line referring to the point estimate.
When <code><a href="https://rdrr.io/pkg/gemtc/man/mtc.nodesplit.html" class="external-link">mtc.nodesplit</a></code> has been employed, the
95% confidence interval has been approximated using the Bucher's approach
based on the corresponding direct and indirect results. This was necessary
because <code><a href="https://rdrr.io/pkg/gemtc/man/mtc.nodesplit.html" class="external-link">mtc.nodesplit</a></code> (version 1.0-2)
returns only the inconsistency p-values rather than the posterior results on
the inconsistency parameters. The mean estimate on
the scale of the selected effect measure appears at the top of each density
curve.</p>
<p>The Kullback-Leibler divergence value appears at the top left of each plot
in three colours: black, if no threshold has been defined (the default),
green, if the Kullback-Leibler divergence is below the specified
<code>threshold</code> (not concerning inconsistency) and red, if the
Kullback-Leibler divergence is at least the specified <code>threshold</code>
(substantial inconsistency).</p>
<p>The second plot is a percent stacked bar plot on the percentage contribution
of approximating direct with indirect estimate (and vice-versa) to the total
information loss for each target comparison. Total information loss is
defined as the sum of the KLD value when approximating the direct with
indirect estimate (blue bars), and the KLD when approximating the indirect
with direct estimate (black bars). Values parentheses refer to the
corresponding KLD value.</p>
<p>The function also returns the data-frame <code>average_KLD</code> that includes the
split comparisons and the corresponding average Kullback-Leibler divergence
value.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Bucher HC, Guyatt GH, Griffith LE, Walter SD. The results of direct and
indirect treatment comparisons in meta-analysis of randomized controlled
trials. <em>J Clin Epidemiol</em> 1997;<b>50</b>(6):683–91.</p>
<p>Dias S, Welton NJ, Caldwell DM, Ades AE. Checking consistency in mixed
treatment comparison meta-analysis.
<em>Stat Med</em> 2010;<b>29</b>(7-8):932–44.
doi: 10.1002/sim.3767</p>
<p>Kullback S, Leibler RA. On information and sufficiency.
<em>Ann Math Stat</em> 1951;<b>22</b>(1):79–86. doi: 10.1214/aoms/1177729694</p>
<p>van Valkenhoef G, Dias S, Ades AE, Welton NJ. Automated generation of
node-splitting models for assessment of inconsistency in network
meta-analysis. <em>Res Synth Methods</em> 2016;<b>7</b>(1):80–93.
doi: 10.1002/jrsm.1167</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></code>,
  <code><a href="https://rdrr.io/pkg/gemtc/man/mtc.nodesplit.html" class="external-link">mtc.nodesplit</a></code>,
  <code><a href="kld_measure.html">kld_measure</a></code>,
  <code><a href="https://rdrr.io/pkg/netmeta/man/netsplit.html" class="external-link">netsplit</a></code>,
  <code><a href="run_nodesplit.html">run_nodesplit</a></code>,
  <code><a href="https://stringr.tidyverse.org/reference/str_wrap.html" class="external-link">str_wrap</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Loukia M. Spineli</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"nma.baker2009"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Read results from 'run_nodesplit' (using the default arguments)</span></span></span>
<span class="r-in"><span><span class="va">node</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'extdata/node_baker.rds'</span>, package <span class="op">=</span> <span class="st">'rnmamod'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The names of the interventions in the order they appear in the dataset</span></span></span>
<span class="r-in"><span><span class="va">interv_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"placebo"</span>, <span class="st">"budesonide"</span>, <span class="st">"budesonide plus formoterol"</span>,</span></span>
<span class="r-in"><span>                  <span class="st">"fluticasone"</span>, <span class="st">"fluticasone plus salmeterol"</span>,</span></span>
<span class="r-in"><span>                  <span class="st">"formoterol"</span>, <span class="st">"salmeterol"</span>, <span class="st">"tiotropium"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Apply the function</span></span></span>
<span class="r-in"><span><span class="fu">kld_inconsistency</span><span class="op">(</span>node <span class="op">=</span> <span class="va">node</span>,</span></span>
<span class="r-in"><span>                  threshold <span class="op">=</span> <span class="fl">0.64</span>,</span></span>
<span class="r-in"><span>                  drug_names <span class="op">=</span> <span class="va">interv_names</span>,</span></span>
<span class="r-in"><span>                  outcome <span class="op">=</span> <span class="st">"Odds ratio (logarithmic scale)"</span>,</span></span>
<span class="r-in"><span>                  str_wrap_width <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Loukia Spineli.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

